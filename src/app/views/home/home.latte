{extends '../layouts/Base.latte'}

{block content}
<div class="container">
    <!-- Banner de bienvenida -->
    <div class="card text-center mb-xl">
        <h2>Â¡Bienvenido a Docker PHP API! ğŸš€</h2>
        <p class="text-muted">
            Una aplicaciÃ³n moderna con Flight Framework, Latte y HTMX
        </p>
    </div>

    <!-- Estado de autenticaciÃ³n -->
    {if $isAuthenticated}
        <div class="card mb-lg" style="border-color: var(--color-success);">
            <h3>âœ… SesiÃ³n Activa</h3>
            <p>Â¡Hola <strong>{$currentUser}</strong>! Tienes acceso a todas las funcionalidades.</p>
            <a href="/dashboard" class="btn">Ir al Dashboard ğŸ“Š</a>
        </div>
    {else}
        <div class="card mb-lg" style="border-color: var(--color-primary);">
            <h3>ğŸ” Ãrea de AutenticaciÃ³n</h3>
            <p>Inicia sesiÃ³n para acceder a funcionalidades protegidas.</p>
            <div class="flex gap-md">
                <a href="/login" class="btn">Iniciar SesiÃ³n</a>
                <div class="text-muted text-sm" style="align-self: center;">
                    Demo: <code>demo/demo</code>
                </div>
            </div>
        </div>
    {/if}

    <!-- Funcionalidades disponibles -->
    <div class="flex gap-lg" style="flex-wrap: wrap;">
        <!-- Ejemplo HTMX pÃºblico -->
        <div class="card" style="flex: 1; min-width: 300px;">
            <h3>ğŸ’¬ Saludar (PÃºblico)</h3>
            <p class="text-muted mb-md">Ejemplo de HTMX sin autenticaciÃ³n requerida.</p>

            <form hx-post="/saludar" hx-target="#respuesta" hx-indicator="#loading-saludo">
                <div class="mb-md">
                    <input
                        name="nombre"
                        placeholder="Ingresa tu nombre"
                        style="margin-bottom: 0.5rem;"
                        value="Visitante"
                    />
                </div>
                <button type="submit" class="btn btn-secondary">
                    Saludar
                    <span id="loading-saludo" class="htmx-indicator">â³</span>
                </button>
            </form>
            <div id="respuesta" class="mt-md"></div>
        </div>

        <!-- Funciones protegidas -->
        <div class="card" style="flex: 1; min-width: 300px;">
            <h3>ğŸ”’ Ãrea Protegida</h3>
            <p class="text-muted mb-md">Funcionalidades que requieren autenticaciÃ³n.</p>

            {if $isAuthenticated}
                <div class="success mb-md">
                    âœ… Tienes acceso a contenido protegido
                </div>

                <button
                    hx-get="/api/protected-data"
                    hx-target="#protected-preview"
                    hx-indicator="#loading-protected"
                    class="btn mb-sm"
                    style="width: 100%;"
                >
                    Ver Datos Protegidos
                    <span id="loading-protected" class="htmx-indicator">â³</span>
                </button>

                <div id="protected-preview"></div>
            {else}
                <div class="text-center">
                    <p class="text-muted">ğŸ” Requiere autenticaciÃ³n</p>
                    <a href="/login" class="btn btn-secondary">Iniciar SesiÃ³n</a>
                </div>
            {/if}
        </div>
    </div>

    <!-- Ejemplos de ValidaciÃ³n -->
    <div class="card mt-xl">
        <h3>ğŸ“ Ejemplos de ValidaciÃ³n y Mensajes Flash</h3>
        <p class="text-muted mb-lg">Explora ejemplos prÃ¡cticos de validaciÃ³n de formularios y mensajes flash sin HTMX.</p>

        <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--spacing-lg);">
            <!-- Ejemplo 1: Registro -->
            <div class="example-card" style="padding: var(--spacing-lg); border: 1px solid var(--color-border); border-radius: var(--border-radius); background: var(--color-bg-light);">
                <h4 style="margin-bottom: var(--spacing-sm);">ğŸ“ Registro Completo</h4>
                <p class="text-muted text-sm" style="margin-bottom: var(--spacing-md);">
                    Formulario con validaciones complejas: contraseÃ±as seguras, emails, longitudes, confirmaciÃ³n.
                </p>
                <ul style="list-style: none; padding: 0; margin-bottom: var(--spacing-md); font-size: 0.875rem;">
                    <li>â€¢ Usuario alfanumÃ©rico (3-20 chars)</li>
                    <li>â€¢ Email vÃ¡lido</li>
                    <li>â€¢ ContraseÃ±a segura con reglas</li>
                    <li>â€¢ ConfirmaciÃ³n de contraseÃ±a</li>
                    <li>â€¢ ValidaciÃ³n de edad numÃ©rica</li>
                    <li>â€¢ URL opcional</li>
                </ul>
                <a href="/examples/registration" class="btn btn-secondary" style="width: 100%;">
                    Probar Registro
                </a>
            </div>

            <!-- Ejemplo 2: Contacto -->
            <div class="example-card" style="padding: var(--spacing-lg); border: 1px solid var(--color-border); border-radius: var(--border-radius); background: var(--color-bg-light);">
                <h4 style="margin-bottom: var(--spacing-sm);">ğŸ“§ Formulario Contacto</h4>
                <p class="text-muted text-sm" style="margin-bottom: var(--spacing-md);">
                    Ejemplo mÃ¡s simple con validaciones bÃ¡sicas y manejo de errores.
                </p>
                <ul style="list-style: none; padding: 0; margin-bottom: var(--spacing-md); font-size: 0.875rem;">
                    <li>â€¢ Nombre solo letras y espacios</li>
                    <li>â€¢ Email requerido</li>
                    <li>â€¢ Asunto con longitud mÃ­nima</li>
                    <li>â€¢ Mensaje entre 10-1000 chars</li>
                    <li>â€¢ Mensajes flash informativos</li>
                </ul>
                <a href="/examples/contact" class="btn btn-secondary" style="width: 100%;">
                    Probar Contacto
                </a>
            </div>

            <!-- Ejemplo 3: Demo Mensajes -->
            <div class="example-card" style="padding: var(--spacing-lg); border: 1px solid var(--color-border); border-radius: var(--border-radius); background: var(--color-bg-light);">
                <h4 style="margin-bottom: var(--spacing-sm);">ğŸ¨ Demo Mensajes Flash</h4>
                <p class="text-muted text-sm" style="margin-bottom: var(--spacing-md);">
                    Prueba todos los tipos de mensajes flash disponibles en el sistema.
                </p>
                <ul style="list-style: none; padding: 0; margin-bottom: var(--spacing-md); font-size: 0.875rem;">
                    <li>â€¢ âœ… Mensajes de Ã©xito</li>
                    <li>â€¢ âŒ Mensajes de error</li>
                    <li>â€¢ âš ï¸ Mensajes de advertencia</li>
                    <li>â€¢ â„¹ï¸ Mensajes informativos</li>
                    <li>â€¢ ğŸ“ MÃºltiples mensajes</li>
                </ul>
                <a href="/examples/validation-demo" class="btn btn-secondary" style="width: 100%;">
                    Ver Demo
                </a>
            </div>
        </div>

        <!-- Acceso rÃ¡pido -->
        <div class="mt-lg" style="padding-top: var(--spacing-lg); border-top: 1px solid var(--color-border);">
            <h4 style="margin-bottom: var(--spacing-md);">ğŸš€ Acceso RÃ¡pido</h4>
            <div class="flex gap-sm" style="flex-wrap: wrap;">
                <a href="/examples/registration" class="btn" style="font-size: 0.875rem; padding: 0.5rem 1rem;">
                    ğŸ“ Registro
                </a>
                <a href="/examples/contact" class="btn" style="font-size: 0.875rem; padding: 0.5rem 1rem;">
                    ğŸ“§ Contacto
                </a>
                <a href="/examples/validation-demo" class="btn" style="font-size: 0.875rem; padding: 0.5rem 1rem;">
                    ğŸ¨ Demo Flash
                </a>
            </div>
        </div>
    </div>

    <!-- InformaciÃ³n tÃ©cnica -->
    <div class="card mt-xl">
        <h3>ğŸ› ï¸ Stack TecnolÃ³gico</h3>
        <div class="flex gap-lg" style="flex-wrap: wrap;">
            <div style="flex: 1; min-width: 200px;">
                <h4>Backend</h4>
                <ul style="list-style: none; padding: 0;">
                    <li>âœ… PHP 8.2 + FrankenPHP</li>
                    <li>âœ… Flight Framework</li>
                    <li>âœ… Latte Templates</li>
                    <li>âœ… Sistema de AutenticaciÃ³n</li>
                </ul>
            </div>
            <div style="flex: 1; min-width: 200px;">
                <h4>Frontend</h4>
                <ul style="list-style: none; padding: 0;">
                    <li>âœ… HTMX para interactividad</li>
                    <li>âœ… CSS Variables + Responsive</li>
                    <li>âœ… Componentes modulares</li>
                    <li>âœ… Estados de carga</li>
                </ul>
            </div>
            <div style="flex: 1; min-width: 200px;">
                <h4>DevOps</h4>
                <ul style="list-style: none; padding: 0;">
                    <li>âœ… Docker + Docker Compose</li>
                    <li>âœ… MySQL 8.0</li>
                    <li>âœ… Xdebug habilitado</li>
                    <li>âœ… Hot reload</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
code {
    background-color: var(--color-bg-light);
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
}

.success {
    color: var(--color-success);
    background-color: rgba(16, 185, 129, 0.1);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius);
    border: 1px solid rgba(16, 185, 129, 0.3);
}
</style>
{/block}